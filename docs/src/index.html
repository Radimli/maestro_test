<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Maestro Audio Framework: Maestro audio framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="new_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Maestro Audio Framework<span id="projectnumber">&#160;v 2.0.0</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Maestro audio framework </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2nxf33034_2nextgen_2sdk-next_2mcu-sdk-3_80_2middleware_2audio__voice_2maestro_2README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Introduction</h1>
<p>Maestro audio framework intends to enable chaining of basic audio processing blocks, called <em>elements</em>. These blocks then form stream processing objects, called <em>pipeline</em>. This pipeline can be used for multiple audio processing use cases.</p>
<p>The processing blocks can include (but are not limited to) different audio sources (for example file or microphone), decoders or encoders, filters or effects, and audio sinks. Framework overview is depicted in the following picture:</p>
<div class="image">
<object type="image/svg+xml" data="maestroApp.svg" style="pointer-events: none;"></object>
<div class="caption">
maestro overview</div></div>
    <p>*not all elements and libraries are supported in Zephyr port. For more information, see <a href="zephyr/README.rst">Maestro on Zephyr</a></p>
<p>The Maestro audio framework is an open-source component developed by NXP Semiconductors and released under the BSD-compatible license. It is running on RTOS (Zephyr or FreeRTOS), abstracted by OSA layer.</p>
<p>For detailed description of the audio Maestro framework, please refer to the <a class="el" href="md_ProgrammersGuide.html">programmer's guide</a>.</p>
<p>To see what is new, see changelog.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Maestro on Zephyr</h1>
<p>Getting started guide and further information for Maestro on Zephyr may be found <a href="zephyr/README.rst">here</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Maestro on FreeRTOS</h1>
<p>Maestro on FreeRTOS is supported in NXP's SDK. To get started, see <a href="https://github.com/nxp-mcuxpresso/mcux-sdk">mcux-sdk repository</a>.</p>
<h2><a class="anchor" id="supported-examples"></a>
Supported examples</h2>
<p>The current version of the Maestro audio framework supports several optional <a class="el" href="md_supported__features.html">features</a>, some of which are used in these examples:</p>
<ul>
<li><a class="el" href="md_maestro__playback.html">maestro_playback</a></li>
<li><a class="el" href="md_maestro__record.html">maestro_record</a></li>
<li><a class="el" href="md_maestro__usb__mic.html">maestro_usb_mic</a></li>
<li><a class="el" href="md_maestro__usb__speaker.html">maestro_usb_speaker</a></li>
<li><a class="el" href="md_maestro__sync.html">maestro_sync</a></li>
</ul>
<p>The examples can be found in the <b>audio_examples</b> folder of the desired board. The demo applications are based on FreeRTOS and use multiple tasks to form the application functionality.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Example applications overview</h2>
<p>To set up the audio framework properly, it is necessary to create a streamer with <code>streamer_create</code> API. It is also essential to set up the desired hardware peripherals using the functions described in <code>streamer_pcm.h</code>. The Maestro example projects consist of several files regarding the audio framework. The initial file is <code>main.c</code> with code to create multiple tasks. For features including SD card (in the maestro_playback examples, reading a file from SD card is supported and in maestro_record writing to SD card is currently supported) the <code>APP_SDCARD_Task</code> is created. The command prompt and connected functionalities are handled by <code>APP_Shell_Task</code>.</p>
<p>One of the most important parts of the configuration is the <code>streamer_pcm.c</code> where the initialization of the hardware peripherals, input and output buffer management can be found. For further information please see also <code>streamer_pcm.h</code></p>
<p>In the Maestro USB examples (maestro_usb_mic and maestro_usb_speaker), the USB configuration is located in the <code>usb_device_descriptor.c</code>, <code>audio_microphone.c</code> and <code>audio_speaker.c</code> files. For further information please see also <code>usb_device_descriptor.h</code>, <code>audio_microphone.h</code> and <code>audio_speaker.h</code>.</p>
<p>In order to be able to get the messages from the audio framework, it is necessary to create a thread for receiving the messages from the streamer, which is usually called a <code>Message Task</code>. The message thread is placed in the <code>app_streamer.c</code> file, reads the streamer message queue, and reacts to the following messages:</p>
<ul>
<li>STREAM_MSG_ERROR - stops the streamer and exits the message thread</li>
<li>STREAM_MSG_EOS - stops the streamer and exits the message thread</li>
<li>STREAM_MSG_UPDATE_DURATION - prints info about the stream duration</li>
<li>STREAM_MSG_UPDATE_POSITION - prints info about current stream position</li>
<li>STREAM_MSG_CLOSE_TASK - exits the message thread</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
File structure</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Folder   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">src   </td><td class="markdownTableBodyLeft">Maestro audio framework sources    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">src/inc   </td><td class="markdownTableBodyLeft">Maestro include files    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">src/core   </td><td class="markdownTableBodyLeft">Maestro core sources    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">src/cci   </td><td class="markdownTableBodyLeft">Common decoder interface sources    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">src/cei   </td><td class="markdownTableBodyLeft">Common encoder interface sources    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">src/elements   </td><td class="markdownTableBodyLeft">Maestro elements sources    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">src/devices   </td><td class="markdownTableBodyLeft">External audio devices implementation (audio source &amp; audio sink elements)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">src/utils   </td><td class="markdownTableBodyLeft">Helper utilities utilized by Maestro    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">docs   </td><td class="markdownTableBodyLeft">Generated documentation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">doxygen   </td><td class="markdownTableBodyLeft">Documentation sources    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">components   </td><td class="markdownTableBodyLeft">Glue for audio libraries, so they can be used in elements    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">tests   </td><td class="markdownTableBodyLeft">Maestro tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">zephyr/   </td><td class="markdownTableBodyLeft">Zephyr related files    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">zephyr/samples/   </td><td class="markdownTableBodyLeft">Zephyr samples    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">zephyr/tests/   </td><td class="markdownTableBodyLeft">Zephyr tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">zephyr/audioTracks/   </td><td class="markdownTableBodyLeft">Audio tracks for testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">zephyr/wrappers/   </td><td class="markdownTableBodyLeft">Zephyr NXP SDK Wrappers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">zephyr/doc/   </td><td class="markdownTableBodyLeft">Zephyr documentation configuration for Sphinx    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">zephyr/scripts/   </td><td class="markdownTableBodyLeft">Zephyr helper scripts, mostly for testing   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md6"></a>
Contribution to the Maestro project</h1>
<p>We welcome and encourage the community to submit patches directly to the Maestro project placed on github. Contributing can be managed via pull-requests. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">&copy; 2020 NXP Semiconductors. All rights reserved.
    </li>
  </ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
    },
  });
</script>
</body>
</html>
